# Nginx Development Configuration
# Provides a simple reverse proxy for local development services

events {
    worker_connections 1024;
}

http {
    # Development server for frontend (when needed)
    upstream frontend {
        server host.docker.internal:5173;
    }

    # Service health dashboard
    server {
        listen 80;
        server_name localhost;

        # Health check dashboard
        location / {
            return 200 '
<!DOCTYPE html>
<html>
<head>
    <title>GF\'d Development Services</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .service { display: flex; justify-content: space-between; align-items: center; padding: 15px; margin: 10px 0; background: #f8f9fa; border-radius: 6px; }
        .status { padding: 4px 12px; border-radius: 4px; color: white; font-size: 12px; }
        .running { background: #28a745; }
        .stopped { background: #dc3545; }
        h1 { color: #333; text-align: center; margin-bottom: 30px; }
        a { color: #007bff; text-decoration: none; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üçû GF\'d Development Services</h1>
        <div class="service">
            <div>
                <strong>PostgreSQL Database</strong><br>
                <small>Main application database</small>
            </div>
            <div>
                <span class="status running">RUNNING</span>
                <a href="postgresql://gfd_user:gfd_password@localhost:5432/gfd_db">Connect</a>
            </div>
        </div>
        <div class="service">
            <div>
                <strong>Redis Cache</strong><br>
                <small>Session storage and caching</small>
            </div>
            <div>
                <span class="status running">RUNNING</span>
                <a href="redis://localhost:6379">Connect</a>
            </div>
        </div>
        <div class="service">
            <div>
                <strong>MinIO Storage</strong><br>
                <small>S3-compatible file storage</small>
            </div>
            <div>
                <span class="status running">RUNNING</span>
                <a href="http://localhost:9001" target="_blank">Console</a>
            </div>
        </div>
        <div class="service">
            <div>
                <strong>MongoDB Analytics</strong><br>
                <small>Analytics and logging database</small>
            </div>
            <div>
                <span class="status running">RUNNING</span>
                <a href="mongodb://gfd_mongo_user:gfd_mongo_password@localhost:27017">Connect</a>
            </div>
        </div>
        <div class="service">
            <div>
                <strong>MailHog</strong><br>
                <small>Email testing service</small>
            </div>
            <div>
                <span class="status running">RUNNING</span>
                <a href="http://localhost:8025" target="_blank">Web UI</a>
            </div>
        </div>
        <div class="service">
            <div>
                <strong>Frontend Application</strong><br>
                <small>React + Vite development server</small>
            </div>
            <div>
                <span class="status running">RUNNING</span>
                <a href="http://localhost:5173" target="_blank">Open App</a>
            </div>
        </div>
    </div>
</body>
</html>';
            add_header Content-Type text/html;
        }

        # Proxy to frontend when needed
        location /app {
            proxy_pass http://frontend;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
        }
    }
}